"""
Глобальные константы симуляции эволюции.

Здесь только «настройки мира», без логики.
"""

# =============================================================================
# МИР / СЕТКА
# =============================================================================

WORLD_WIDTH: int = 50      # ширина сетки мира (в ячейках)
WORLD_HEIGHT: int = 50     # высота сетки мира (в ячейках)

# =============================================================================
# КЛЕТКИ / ПОПУЛЯЦИЯ
# =============================================================================

CELL_COUNT: int = 50       # стартовое количество клеток
CELLS_LIMIT: int = 1000    # жёсткий верхний предел клеток в мире

CELL_RADIUS: float = 0.5   # радиус клетки (используется в физике столкновений)

# =============================================================================
# ФИЗИКА ДВИЖЕНИЯ КЛЕТОК
# =============================================================================

# сила отталкивания при пересечении радиусов
CELL_REPULSION_FORCE: float = 2.5

# коэффициент трения (0.85 = сохраняется 85% скорости, 15% теряется за тик)
FRICTION: float = 0.85

# максимальная модуль скорости клетки
MAX_VELOCITY: float = 1.0

# коэффициент изменения скорости от акселерации
ACCELERATION_FACTOR: float = 0.3

# максимальное изменение скорости за тик (кап по акселерации)
MAX_ACCELERATION: float = 1.0

# =============================================================================
# ВРЕМЯ / ШАГИ СИМУЛЯЦИИ
# =============================================================================

SIMULATION_STEPS: int = 1000  # сколько тиков просчитывать в оффлайновых тестах

FPS: int = 60                 # целевой FPS для визуализации/цикла
FRAME_TIME: float = 1 / FPS   # длительность кадра в секундах

SAVES_DIR: str = "saves/"     # директория для сохранений снапшотов мира

AUTO_SAVE = True
TICK_SAVE_PERIOD = 10000

# Включать ли базовый набор генов при инициализации
INCLUDE_BASE_GENES: bool = True

# =============================================================================
# ВЕЩЕСТВА / ГЕНЕРАЦИЯ И РАССЕИВАНИЕ
# =============================================================================

# распределение типов веществ при начальной инициализации мира
SUBSTANCE_DISTRIBUTION = {
    "ORGANIC": 100,   # количество органических пятен/скоплений
    "TOXIN": 10,      # количество источников токсинов
    "INORGANIC": 10,  # количество источников неорганики
}

# количество различных типов неорганических соединений
UNIQUE_INORGANIC_COUNT: int = 30

# вероятность появления органики в отдельной ячейке за один тик
# (0.0008 = 0.08% шанс на ячейку; можно выключить логикой в Environment)
ORGANIC_SPAWN_PROBABILITY_PER_CELL_PER_TICK: float = 0.0008

# скорость рассеивания веществ (0.0 = нет диффузии, 0.1 = 10% уходит соседям)
SUBSTANCE_DIFFUSION_RATE: float = 0.1

# =============================================================================
# ТИПЫ ВЕЩЕСТВ
# =============================================================================

# --- Органические вещества (еда / энергия) ---
ORGANIC_TYPES = [
    {
        "name": "ORGANIC_0",
        "energy": 1.5,
        "concentration": (0.1, 10.0),  # диапазон стартовой концентрации
    },
    {
        "name": "ORGANIC_1",
        "energy": 3.0,
        "concentration": (0.1, 10.0),
    },
    {
        "name": "ORGANIC_2",
        "energy": 5.0,
        "concentration": (0.1, 10.0),
    },
]

# --- Токсины (наносят вред, но могут использоваться генами) ---
TOXIN_TYPES = [
    {
        "name": "TOXIN_0",
        "energy": 1.0,
        "concentration": (0.1, 10.0),  # слабый токсин
    },
    {
        "name": "TOXIN_1",
        "energy": 3.0,
        "concentration": (0.1, 10.0),
    },
    {
        "name": "TOXIN_2",
        "energy": 4.0,
        "concentration": (0.1, 10.0),
    },
]

# --- Неорганика (буферные / вспомогательные вещества, низкоэнергетичные) ---
INORGANIC_TYPES = [
    {
        "name": f"INORGANIC_{i}",
        "energy": 0.5,
        "concentration": (0.1, 10.0),
    }
    for i in range(UNIQUE_INORGANIC_COUNT)
]

# Полный список имён всех веществ (удобно для проверки, генерации и т.п.)
ALL_SUBSTANCE_NAMES = [
    "ORGANIC_0",
    "ORGANIC_1",
    "ORGANIC_2",
    "TOXIN_0",
    "TOXIN_1",
    "TOXIN_2",
    *[f"INORGANIC_{i}" for i in range(UNIQUE_INORGANIC_COUNT)],
]

# Глобальный словарь для хранения параметров конкретных веществ (если нужен)
SUBSTANCES: dict = {}
